# FLEX (Flexible Layout System): Blocks

Custom Gutenberg blocks created for the Flex Layout System.  

This extension creates the row and column structure with nested inner blocks. 

This plugin *should not be touched or edited*.  All project specific blocks should be created using the ACF block method detailed below. 

*However*, there may be a case in which a core block needs to be edited or created.  See "Adding/Editing FLEX Blocks below".  This requires approval and submission of a pull request.

## ACF Gutenberg Blocks

### Adding ACF Blocks
To create a new acf blocks, duplicate `blocks/blocks_template` in the child `blocks` folder and rename as per naming conventions below. Once the blocks is created, register and enable it in the child `config/global-variables/blocks.php`. (More info in `flexlayout-child/README.md`).

If an existing ACF blocks needs to be edited for the project, copy the block's folder to the child's `blocks` folder and make changes there. Changes made to this blocks in the child theme will override existing. 

Do NOT edit or add native Gutenberg blocks!! If a change is required, please submit a pull request here: https://github.com/ATTCKDigital/flexlayout


#### To add Front End JS to a new ACF block:
- In the block markup, on the outer most div, add `data-component-name="JSComponentName"`
- If it's an existing block, use the existing function name.  If it's a new block, create a new JS file and place in the block folder. 


## Adding/Editing FLEX Blocks

1. Checkout the `develop` branch from the [Flexlayout repo](https://github.com/ATTCKDigital/flexlayout) and then create your own feature branch from `develop`
2. Run `npm run dev` from your child theme (this watches for changes).
4. Make changes. For the block to appear in the WordPress admin, you must add the block name to the `blocks.php` file in the `global-variables` file in either the parent or child theme (depending on the use case). You must also add it to `blocks/index.js` in the plugin so it is compiled.
5. Submit a pull request to `develop`.  Your pr will be reviewed and either returned for fixes or approved. 
6. The development team will then merge the code into `master` and tag it with a release version.

`master` will always be production ready.  `develop` may contain unreleased features but should be used for ALL development.

#### How to use a blocks in a front end template:
Blocks will automatically be available in the Gutenberg editor if they have been added to `config/global-variables/blocks.php` in the child theme.  The front end output of the block is defined in the block's php file.


#### To add Front End JS to a new FLEX block:
okatodo:  

### Naming Conventions
- Block Folders: `block_block-name`
- Block Markup: `block-name.php`
- Block SCSS: `_block-name.scss`
- Block Admin SCSS: `_block-name-admin.scss`
- Block Front End JS: `_block-name.js`
- Block ReadMe: `README_block-name.md` (not required, but helpful!)
- Block ACF Fields: This file will be autogenerated with the field group ID.
- Block Register ACF Fields: `register_block-name.php`

Created 12/4/2018 by okadots for ATTCK

